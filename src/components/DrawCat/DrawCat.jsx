import React from "react";
import "./drawCat.scss";
import { useEffect } from "react";
import { useRef } from "react";

const DrawCat = ({ parentRef }) => {
  const containerRef = useRef(null);
  const pathRef = useRef(null);

  useEffect(() => {
    const path = pathRef.current;

    const container = containerRef.current;

    let lengthPath = path.getTotalLength();

    path.style.strokeDasharray = lengthPath + " " + lengthPath;

    path.style.strokeDashoffset = lengthPath;

    path.getBoundingClientRect();
    function draw() {
      let scrollPercentage =
        (document.documentElement.scrollTop - container.offsetTop) /
        container.offsetHeight;

      let drawlength = lengthPath * scrollPercentage * 1.2;
      path.style.strokeDashoffset = lengthPath - drawlength;

      if (scrollPercentage >= 0.99) {
        path.style.strokeDasharray = "none";
      } else {
        path.style.strokeDasharray = lengthPath + " " + lengthPath;
      }
    }
    window.addEventListener("scroll", draw);

    return () => window.removeEventListener("scroll", draw);
  });

  return (
    <section className="annimation-draw-svg" ref={containerRef}>
      <div className="svg-container-draw">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="116.264"
          height="2000"
          viewBox="0 0 116.264 2100"
        >
          <path
            ref={pathRef}
            id="Tracé_5"
            data-name="Tracé 5"
            d="M670.961-398s.03,171.558,0,176.292-2.61,6.214-5.861,10.144-3.477,3.715-7.145,5.577-4.1.748-7.525,1.869-3.463,1.028-6.157,2.617-2.48,1.309-4.618,3.739a21.286,21.286,0,0,0-3.933,5.982c-1.539,2.991-1.411,1.963-2.223,5.982a54.893,54.893,0,0,0-1.026,10.094c-.256,4.731-.454,4.968,0,8.829s.342,3.523,1.815,6.615a14.638,14.638,0,0,0,4.078,5.752c2.269,2.229,1.983,1.869,5,3.163s3.417.9,7.065,2.013,3.857,1.33,7.525,2.444,3.893.288,7.145,2.013,3.862,2.265,5.861,4.889,1.6,2.157,2.136,5.608.888,4.745,0,8.2a11.7,11.7,0,0,1-3.552,5.608l-6.571,6.245s-3.221,3.518-5.566,6.591a27.55,27.55,0,0,0-3.814,5.7,8.783,8.783,0,0,0-1.4,4.424,10.121,10.121,0,0,0,0,4.595c.35,1.787.019.808,1.4,2.553a27.7,27.7,0,0,0,4.125,4.424c2.18,1.957,1.537,1.234,4.593,3.4s4.807,2.723,7.629,5.275a13.565,13.565,0,0,1,3.659,4.935l1.09,9.274.389,2.042L685.2-71.661v-4.084l-10.119,5.19L672.664-68.6H669.94l-15.335-5.275v3.318L666.826-60l1.946-1.7,1.713-10.721h1.09l1.545,6.593,1.148,7.7,1.148,11.122,1.357,10.095L677.565.2s-.584,7.687-1.1,10.546-.812,2.966-.812,2.966-.358-.107-1.088-2.966S672.6.2,672.6.2s-1.8-20.172-2.781-26.9-1.153,0-1.153,0a15.277,15.277,0,0,0-3.595,1.854c-1.543,1.149-2.711,1.187-2.578,2.743s1.219,9.49,1.221,10.38a3.211,3.211,0,0,1-.337,1.483s-2.275,1.835-3.258-.445S658.9-19.8,658.9-19.8l7.6,3.262L634.957-37.893v-3.559l17.094,5.561,10.785,2.966,6.987.667s1.088.371,1.085-.667S668.33-55.91,668.33-55.91s.188,11.139.43,22.321c.185,8.557.406,17.216.588,20.015A118.612,118.612,0,0,0,670.907.588c.984,6.3,1.761,9.638,2.374,11.047a27.005,27.005,0,0,0,1.7,3.633c.8,1.335.845,1.779,1.492,1.705s1.1-2,1.1-2a14.628,14.628,0,0,0,.94-3.336c0-.965.407-27.656.407-27.656l-1.347-15.348,32.007-16.163.475,5.338-25.5,21.576v7.489s.288,1.409,1.56,1.409,2.866,1.483,3.527-1.409-.882-10.158-.882-10.158l-7.326,6.747.882,6.3s-.373,12.178-1.221,18.981-2.171,8.23-2.171,8.23A43.84,43.84,0,0,0,674.57,23.5a12.379,12.379,0,0,0-1.289,5.02,22.553,22.553,0,0,0,.339,4.47,11.692,11.692,0,0,0,1.357,4.6,26.067,26.067,0,0,0,3.527,5.709c2.035,2.8,2.917,2.836,4.613,5.487a41.444,41.444,0,0,1,2.7,4.895,15.938,15.938,0,0,1-1,6.524c-1.323,3.726-1.984,3.818-4.816,8.6s-4.409,6.061-6.512,10.528a24.776,24.776,0,0,0-2.374,7.5,27.589,27.589,0,0,0,0,5.026,8.534,8.534,0,0,0,1.085,4,19.523,19.523,0,0,0,2.51,3.855L677.7,103.7s7.936,6.362,8.4,10.472.2,86.1,0,91.259.492,4.921-2.985,8.947-4.867,3.221-10.921,7.158-8.764,4.652-13.295,8.589-4.829,7.158-4.829,7.158.877,5.794,2.292,7.515,28.449,20.757,28.449,20.757,2.983,4.116,2.983,7.515-2.983,6.084-2.983,6.084a65.078,65.078,0,0,1-9.836,9.3c-6.478,5.1-10.85,6.173-16.076,11.094s-4.829,4.474-4.829,8.589-.33,3.4,4.829,7.873,12.723,8.352,15.8,10.021,8.123,2.058,11.4,6.084,2.445,10.525,2.445,10.525-.923,121.724-2.445,184.52-2.67,59.342-3.643,66.663a53.338,53.338,0,0,0,0,13.976c.108.9,0,1.8.153,2.838s.077.649.451,1.324a6.336,6.336,0,0,0,1.045,1.376,2.25,2.25,0,0,0,.691.6,3.279,3.279,0,0,0,1.185.415,9.916,9.916,0,0,0,1.832,0s-.477.058.021,0l1.971-.234s.712-.071.665.234-.855.986-.855.986a8.551,8.551,0,0,1-1.187.779c-.582.3-.457.389-1.14.415a2.41,2.41,0,0,1-1.591-.312,4.412,4.412,0,0,1-1.472-1.168,10.292,10.292,0,0,1-1.164-1.35l-.013-.034-.723-1.862a5.913,5.913,0,0,0-.974-1.791,3.9,3.9,0,0,0-1.639-1.3,2.535,2.535,0,0,0-1.686-.415,2.491,2.491,0,0,0-1.567.727,3.074,3.074,0,0,0-1.259,1.609,4.284,4.284,0,0,0-.4,2.258,2.363,2.363,0,0,0,.4,1.791c.452.772.638.792,1.4,1.3a2.765,2.765,0,0,0,1.66.727,4.694,4.694,0,0,0,2.043-.182c.671-.182.831-.376.641-.545a4.363,4.363,0,0,0-1.4-.13l-1.021-.7.285-.8.9-.415.974-.234h2.042a1.573,1.573,0,0,1,.523.831c.131.539,0,.383,0,1.324s.048,1.454,0,2.44.051.6,0,1.717-.3,1.545-.33,2.311a5.281,5.281,0,0,0,0,1.688,6.486,6.486,0,0,0,.594,1.376c.3.667.271.6.591,1.294a4.375,4.375,0,0,1,.594,1.692,8.787,8.787,0,0,1,0,2.1s-.107,1.837-.143,3.245a5.69,5.69,0,0,1-.259,2.392c-.327.961-.584.782-1.047,1.45s-.808,1.22-.808,1.22.446-.759,0,.038-.248,1.36-.117,2.921.481,1.363.641,3.323a37.961,37.961,0,0,1,0,4.517s-8.966,306.762-8.127,315.4,1.323,7.933,1.9,13.346.56,4.134.407,8.3a32.048,32.048,0,0,1-1.017,8.379,24.531,24.531,0,0,1-2.51,7.637c-1.764,3.856-1.916,4.634-4.545,7.785a20.919,20.919,0,0,1-5.969,4.819,5.488,5.488,0,0,1-3.459.816,9.318,9.318,0,0,1-4.816-1.557c-1.9-1.112-2.086-1.464-2.781-2.892s-.7-1.8,0-2.818,1.085-1.019,2.781-1.26,2.069-.612,4,.3a6.463,6.463,0,0,1,3.731,3.337,12.8,12.8,0,0,1,1.424,5.19v3.781l-.7,7.147-1.606,8.2-14.807,50.4s-.5,1.886,0,1.724.929-.723,1.985-2.373a16.409,16.409,0,0,0,2.239-4.226c.914-2.371,11.217-28.84,12.074-30.1s5.223-2.447,5.223-2.447,5.613-1.687,3.731-2.373-11.26-.371-11.26-.371l-6.037-8.12s-1.085-2.352-1.7,1.3-.656,7.087-1.7,13.717-8.275,40.112-8.275,40.112l.678.593,29.1-20.39a45.728,45.728,0,0,0,4.884-2.6c1.543-1.057,1.289-1.631,1.289-1.631a25.41,25.41,0,0,0-3.052-5.783,32.536,32.536,0,0,0-5.494-6.45c-2.7-2.576-4.918-2.294-5.291-3.855s1.085-1.2,3.12-2.442a48.723,48.723,0,0,1,5.02-2.526,44.649,44.649,0,0,1,6.444-2.224,25.216,25.216,0,0,1,5.7-.667l6.647,1.334a18.8,18.8,0,0,1,5.7,2.743,53.117,53.117,0,0,1,6.512,5.709,46.478,46.478,0,0,1,5.379,8.378,69.578,69.578,0,0,1,4.591,11.515c1.52,4.523,1.471,3.41,2.1,6.953s.429,3.532.429,7.219a45.372,45.372,0,0,1-.429,7.531c-.429,3.866-.151,3.656-1.287,7.864a33.517,33.517,0,0,1-3.258,8.967c-2.392,5.022-2.527,5.783-6.308,11.122a85.345,85.345,0,0,1-8.818,10.232,25.64,25.64,0,0,1-4.339,3.86c-2.577,1.8-3.765,2.892-5.969,3.337a8.284,8.284,0,0,1-5.019-.375,4.324,4.324,0,0,1-2.849-2.219,3.846,3.846,0,0,1-.746-3.114c.1-1.63.05-2.836,1.017-4.226a8.94,8.94,0,0,1,6.919-3.485,8.626,8.626,0,0,1,4.138.959,8.346,8.346,0,0,1,3.39,2.224,24.469,24.469,0,0,1,3.459,4.078c1.287,1.849,2.9,5.543,4.529,10.375s1.357,4.477,1.983,8.954a32.97,32.97,0,0,1,.522,8.954,34.653,34.653,0,0,1-1.3,8.726c-.874,3.878-.47,3.037-2.192,6.787a39.03,39.03,0,0,1-4.7,8.213,40.845,40.845,0,0,1-5.948,7.187,32.1,32.1,0,0,1-6.366,5.76,29.428,29.428,0,0,1-7.253,4.22,22.737,22.737,0,0,1-5.744,1.289,9.477,9.477,0,0,1-4.576-.307,8.106,8.106,0,0,1-5.138-4.241c-.532-1.552-.753-2.193,0-3.633a5.3,5.3,0,0,1,3.014-3.09c1.855-.822,3.054-.759,5.291-.4s2.919.947,4.816,2.373a9.256,9.256,0,0,1,3.336,4.248,16.366,16.366,0,0,1,1.325,4.563s.572,3.576.763,6.8a27.511,27.511,0,0,1,0,6.1,48.2,48.2,0,0,1-1.044,7.9,35.806,35.806,0,0,1-2.007,7.9,23.859,23.859,0,0,1-7.184,10.7L663.6,1247.9l-5.156.945-5.5-.54-4.662-1.654-5.8-4.657-3.859-5.163-2.13-4.59-.185-2.025,1.7-2.734,5.125-5.231,1.76-2.565-1.513-1.552-29.64-19.3-7.626-4.522-.34,1.046,4.028,12.366,2.2,8.771,8.113,36.916.487.574,1-2,1.021-3.972,1.639-2.882,3.254-2.466,6.982-1.246,3.562-.389,1.758-.675-1.194-.753-3.508-.519-4.085-.26-1.164-.441-18.026-35.41-2.375-3.011.807,3.634L625,1243.608l3.16,10.672,1.7,7.09,1.019,5.8.247,4.691-.9,4.894-2.5,4.083-2.532,1.485-3.551.54-3.087-1.147-1.636-1.958v-1.653l1.636-2.835,2.316-2.227,3.828-1.451h4.261l5.31,2.7,2.935,3.082,3.159,5.322,1.872,4.894,1.328,6.209v6.345l-.648,4.32-1.3,4.691-2.933,7.087-4.94,9.449-2.408,388.2,27.54-.3-.488-43.4H655.3l12.345-10.41-5.908,1.542,28.218-30.748,5.291-1.927v-9.35h6.79l-.353,7.132,23.9-12.241s-33.156,36.145-32.891,36.145-23.077,9.154-23.077,9.108.717,17.251.717,17.251l2.544-.2-.267-14.04,7.167-3.01.112,15.929,2.8-1.705-.14-14.393,6.8-2.044-.042,16.529,2.951-.983-.084-15.806,35.323-41.837,1.826,4.848,7.566-3.422-36.212,36.673,2.661.342v27.205h-6.887l-1.2-24.354,4.174.545.626,27.231-33.342,2.453v25.437h44.09l-.835-57.89,26.089-32.452,22.865,33.89-.272,57.935h14.14"
            transform="translate(-605.245 398)"
            fill="none"
            stroke="#707070"
            stroke-width="2"
          />
        </svg>
      </div>
    </section>
  );
};

export default DrawCat;
