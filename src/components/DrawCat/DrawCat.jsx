import React from "react";
import "./drawCat.scss";
import { useEffect } from "react";
import { useRef } from "react";

const DrawCat = ({ parentRef }) => {
  const containerRef = useRef(null);
  const pathRef = useRef(null);

  useEffect(() => {
    const path = pathRef.current;

    const container = containerRef.current;

    let lengthPath = path.getTotalLength();

    path.style.strokeDasharray = lengthPath + " " + lengthPath;

    path.style.strokeDashoffset = lengthPath;

    path.getBoundingClientRect();
    function draw() {
      let scrollPercentage =
        (document.documentElement.scrollTop - container.offsetTop) /
        container.offsetHeight;

      let drawlength = lengthPath * scrollPercentage;
      path.style.strokeDashoffset = lengthPath - drawlength;

      if (scrollPercentage >= 0.99) {
        path.style.strokeDasharray = "none";
      } else {
        path.style.strokeDasharray = lengthPath + " " + lengthPath;
      }
    }
    window.addEventListener("scroll", draw);

    return () => window.removeEventListener("scroll", draw);
  });

  return (
    <section className="annimation-draw-svg" ref={containerRef}>
      <div className="svg-container-draw">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="116.264"
          height="2000"
          viewBox="0 0 116.264 2100"
        >
          <path
            ref={pathRef}
            data-name="TracÃ© 1"
            d="M732.095-397.124c0,1323.3,2.289,1317.269,2.289,1317.269a7.616,7.616,0,0,1-2.944,4.229c-2.232,1.357-5.983,1.2-5.983,1.2s-3.493,0-8.7,2.558-5.558,1.7-12.141,7.673-6.883,5.876-14.191,16.235-9.9,16.932-15.038,25.2-5.509,7.875-5.509,7.875l-1.489-56.985s15.3,27.076,24.716,40.184,20.845,16.8,20.845,16.8l9.678,3.675s10.571,3.106,19.5,1.05,10.832-3.106,19.505-9.275,9.939-9.275,15.187-15.4,5.807-9.1,5.807-9.1a55.475,55.475,0,0,0-8.189-12.251c-5.249-5.863-5.77-6.341-12.8-11.2a60.868,60.868,0,0,0-15.336-8.238c-6.216-2.538-6.514-1.913-9.529-1.913s-2.531,1.913-2.531,1.913l2.382,448.032-8.934,2.275-8.338,3.675-5.211,4.2-4.02,3.85-7,8.75-5.062,11.375-1.787,11.9v17.151a2.268,2.268,0,0,1-2.084,2.975,12.253,12.253,0,0,1-5.807-1.05l-5.658-4.375s-4.467-4.55-4.765-7.35,0-9.625,0-9.625v-13.125c0-1.4-1.482-2.4-2.163-3.2s-2.827-.247-3.77-.33-2.566,1.461-2.647,2.687,0,5.185,0,5.185.01,16.023,0,17.773,3.312,7.537,5.259,10.432,7.559,8.819,11.8,10.3,63.337,1.75,63.91.808.687-1.75-.916-3.9-1.6-3.1-3.436-3.635-10.193,0-10.193,0a12.658,12.658,0,0,1-2.52,0c-1.489-.135,3.092-.944,5.269-3.568s4.81-5.317,5.612-8.413,2.978-2.423,4.123,0,7.1,19.116,11.339,19.52,9.105,2.491,10.079,0-5.269-6.866-6.185-9.962-6.3-17.553-5.595-20.038,4.758-8.285,4.758-8.285,1.41-1.087,2.026-5.592a48.037,48.037,0,0,0,.44-12.427,38.189,38.189,0,0,0-2.114-9.941s-1.667-4.324,0-5.765,3.322,1.484,6.67,0,4.931-4.452,6.722-5.937.7-6.524.7-6.524l-2.379-5.7-2.026-4.66c-.507-1.165,2.269-2.382,0-6.006s-6.806-4.3-9.075-8.492,1.432-6.964,0-8.284-2.357.932-5.727,3-4.647,2.252-7.753,5.281-2.643,2.408-4.669,6.835-2.335,5.178-3.436,10.873-.066,7.576-.969,11.909-2.643,5.422-2.643,5.422v102.6s-3.6,728.187-5.171,751.357-32.929,65.573-42.786,81.961-2.518-10.537,3.357-16.411,9.324-8.112,20.14-7.086,15.945,3.73,23.124,11.189,6.729,18.4,6.729,18.4,1.506,13.428-1.135,24.866-2.25,13.52-9.43,20.886-9.432,7.926-19.289,8.578-13.24-.093-20.14-5.968-7.459-9.138-7.459-17.53c0-7.133,5.389-13.727,7.216-15.777.076-.088.244-.26.244-.26a56.95,56.95,0,0,1,12.338-10.443c6.807-4.01,7.158-3.823,14.889-5.594s6.714-2.891,16.038-1.492,13.147,1.771,21.259,7.086,8.392,5.315,11.189,14.173,2.8,13.24,0,21.259-6.247,8.112-11.189,10.816-3.841-3.823-10.115,0-10.85,3.45-14.979,15.292,0,23.858,0,32.075v95.854L733.263,2813.7l26.854,26.481H690.744l34.686-23.5,19.768,17.157"
            transform="translate(-667.885 397.125)"
            fill="none"
            stroke="#707070"
            stroke-width="3"
          />
        </svg>
      </div>
    </section>
  );
};

export default DrawCat;
