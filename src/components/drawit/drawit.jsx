import React from "react";
import "./drawit.scss";
import { useEffect } from "react";
import { useRef } from "react";

const Drawit = ({ parentRef }) => {
  const containerRef = useRef(null);
  const pathRef = useRef(null);

  useEffect(() => {
    const path = pathRef.current;

    const container = containerRef.current;

    let lengthPath = path.getTotalLength();

    path.style.strokeDasharray = lengthPath + " " + lengthPath;

    path.style.strokeDashoffset = lengthPath;

    path.getBoundingClientRect();
    function draw() {
      let scrollPercentage =
        (document.documentElement.scrollTop - container.offsetTop) /
        container.offsetHeight;

      let drawlength = lengthPath * scrollPercentage * 1.2;
      path.style.strokeDashoffset = lengthPath - drawlength;

      if (scrollPercentage >= 0.99) {
        path.style.strokeDasharray = "none";
      } else {
        path.style.strokeDasharray = lengthPath + " " + lengthPath;
      }
    }
    window.addEventListener("scroll", draw);

    return () => window.removeEventListener("scroll", draw);
  });

  return (
    <section className="annimation-draw-svg" ref={containerRef}>
      <div className="svg-container-draw">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="116.264"
          height="2000"
          viewBox="0 0 116.264 2100"
        >
          <path
            id="Tracé_5"
            ref={pathRef}
            data-name="Tracé 5"
            d="M67.194,1141.8s.031-99.559,0-102.306-2.69-3.606-6.042-5.887-3.584-2.156-7.364-3.236-4.231-.434-7.756-1.085a32.285,32.285,0,0,1-6.346-1.519,13.475,13.475,0,0,1-4.759-2.17,14.748,14.748,0,0,1-4.054-3.471c-1.586-1.736-1.454-1.139-2.291-3.471a18.627,18.627,0,0,1-1.058-5.858c-.264-2.745-.468-2.883,0-5.124s.352-2.044,1.871-3.839a10.791,10.791,0,0,1,4.2-3.338c2.339-1.293,2.044-1.085,5.153-1.836s3.522-.522,7.282-1.168,3.976-.772,7.756-1.419,4.013-.167,7.364-1.168,3.981-1.314,6.042-2.837,1.651-1.252,2.2-3.254.915-2.754,0-4.757-3.661-3.254-3.661-3.254l-6.773-3.624s-3.32-2.041-5.737-3.825a19.183,19.183,0,0,1-3.931-3.308c-1.344-1.469-1.083-1.259-1.444-2.568a3.4,3.4,0,0,1,0-2.666c.361-1.037.02-.469,1.444-1.481a25.466,25.466,0,0,1,4.252-2.568,36.991,36.991,0,0,1,4.734-1.975c3.149-1.259,4.955-1.58,7.863-3.061a9.743,9.743,0,0,0,3.771-2.864l1.123-5.382.4-1.185,10.43,6.123v2.37l-10.43-3.012-2.487-1.136H66.142L50.336,953.7v-1.926l12.6-6.123,2.006.988,1.765,6.221h1.123l1.592-3.826,1.183-4.468,1.183-6.454,1.4-5.858L74,910.714a56.9,56.9,0,0,0-1.129-6.12c-.527-1.659-.837-1.721-.837-1.721s-.369.062-1.121,1.721-2.028,6.12-2.028,6.12-1.853,11.706-2.867,15.609-1.189,0-1.189,0a22.437,22.437,0,0,1-3.705-1.076c-1.591-.667-2.795-.689-2.657-1.592s1.256-5.507,1.258-6.024a1.3,1.3,0,0,0-.347-.861s-2.345-1.065-3.358.258-1.258,5.292-1.258,5.292l7.831-1.893L30.083,932.82v2.065L47.7,931.658l11.117-1.721,7.2-.387s1.121-.215,1.119.387-2.657,13.339-2.657,13.339.194-6.464.443-12.954c.191-4.966.419-9.991.606-11.615a40.327,40.327,0,0,1,1.608-8.218c1.014-3.657,1.815-5.593,2.447-6.411a14.4,14.4,0,0,1,1.748-2.108c.821-.774.871-1.033,1.538-.99S74,902.142,74,902.142a6.049,6.049,0,0,1,.969,1.936c0,.56.42,16.049.42,16.049L74,929.034l32.99,9.38.489-3.1L81.192,922.795v-4.346s.3-.818,1.608-.818,2.954-.861,3.636.818-.909,5.895-.909,5.895l-7.551-3.916.909-3.657a90.38,90.38,0,0,0-1.259-11.015c-.874-3.948-2.237-4.776-2.237-4.776a31.132,31.132,0,0,1-4.475-3.786,4.772,4.772,0,0,1-1.328-2.913,7.505,7.505,0,0,1,.35-2.594,4.862,4.862,0,0,1,1.4-2.668,17.065,17.065,0,0,1,3.636-3.313c2.1-1.624,3.007-1.646,4.754-3.184a24.48,24.48,0,0,0,2.778-2.84,5.58,5.58,0,0,0-1.03-3.786c-1.363-2.162-2.045-2.216-4.964-4.991s-4.545-3.517-6.712-6.11a10.278,10.278,0,0,1-2.447-4.355,9.058,9.058,0,0,1,0-2.917,3.5,3.5,0,0,1,1.119-2.323,13.736,13.736,0,0,1,2.587-2.237l3.086-2.311s8.18-3.692,8.66-6.077.207-49.964,0-52.96.507-2.856-3.076-5.192-5.017-1.869-11.257-4.154-9.034-2.7-13.7-4.984-4.977-4.154-4.977-4.154.9-3.362,2.362-4.361,29.323-12.046,29.323-12.046,3.074-2.388,3.074-4.361-3.074-3.531-3.074-3.531a64.753,64.753,0,0,0-10.138-5.4c-6.677-2.959-11.183-3.583-16.57-6.438s-4.977-2.6-4.977-4.984-.34-1.973,4.977-4.569,13.114-4.847,16.291-5.815,8.373-1.194,11.746-3.531a6.09,6.09,0,0,0,2.52-6.108S84.369,641.346,82.8,604.9s-2.752-34.437-3.755-38.686a17.608,17.608,0,0,1,0-8.111c.112-.52,0-1.043.158-1.647s.08-.377.465-.768a4.959,4.959,0,0,1,1.077-.8,2.564,2.564,0,0,1,.713-.346,5.2,5.2,0,0,1,1.221-.241,18.117,18.117,0,0,1,1.888,0s-.492-.034.021,0l2.032.136s.734.041.685-.136-.881-.573-.881-.573a10.957,10.957,0,0,0-1.224-.452,2.755,2.755,0,0,0-1.175-.241,4.175,4.175,0,0,0-1.64.181,5.081,5.081,0,0,0-1.518.678,8.772,8.772,0,0,0-1.2.783l-.013.02-.745,1.08a3.392,3.392,0,0,1-1,1.039,4.479,4.479,0,0,1-1.689.753,4.321,4.321,0,0,1-1.738.241,3.742,3.742,0,0,1-1.616-.422,2.456,2.456,0,0,1-1.3-.934,1.588,1.588,0,0,1-.416-1.311c0-.588-.05-.591.416-1.039a3.119,3.119,0,0,1,1.447-.753,4.184,4.184,0,0,1,1.711-.422,8.449,8.449,0,0,1,2.105.105c.691.105.857.219.661.316a7.888,7.888,0,0,1-1.444.075l-1.053.407.294.467.93.241,1,.135h2.105a1.125,1.125,0,0,0,.539-.482c.135-.313,0-.222,0-.768a13.63,13.63,0,0,0,0-1.416c-.049-.573.052-.349,0-1s-.307-.9-.34-1.341-.153-.621,0-.979.307-.411.612-.8.28-.349.609-.751a2,2,0,0,0,.612-.982,2.9,2.9,0,0,0,0-1.218s-.11-1.066-.147-1.883.07-.831-.267-1.388-.6-.454-1.08-.841-.832-.708-.832-.708.46.44,0-.022-.256-.789-.121-1.7.5-.791.661-1.928a12.433,12.433,0,0,0,0-2.621s-9.242-178.021-8.376-183.032,1.363-4.6,1.958-7.745.577-2.4.42-4.819a11.06,11.06,0,0,0-1.049-4.862,10.722,10.722,0,0,0-2.587-4.432c-1.818-2.237-1.975-2.689-4.684-4.518a24.56,24.56,0,0,0-6.153-2.8,9.109,9.109,0,0,0-3.566-.473,15.249,15.249,0,0,0-4.964.9c-1.958.645-2.15.85-2.867,1.678s-.717,1.043,0,1.635,1.119.592,2.867.731a8.762,8.762,0,0,0,4.125-.172,6.786,6.786,0,0,0,3.846-1.936,5.076,5.076,0,0,0,1.468-3.012v-2.194l-.721-4.147-1.655-4.759L42.37,280.664s-.511-1.094,0-1,.958.419,2.046,1.377a9.657,9.657,0,0,1,2.307,2.452c.942,1.376,11.562,16.737,12.445,17.469s5.384,1.42,5.384,1.42,5.786.979,3.846,1.377-11.606.215-11.606.215l-6.223,4.712s-1.119,1.365-1.748-.754-.676-4.112-1.748-7.96-8.53-23.278-8.53-23.278l.7-.344,29.994,11.832s3.443.893,5.034,1.506,1.328.947,1.328.947a14.32,14.32,0,0,1-3.146,3.356,27.92,27.92,0,0,1-5.663,3.743c-2.779,1.5-5.069,1.331-5.453,2.237s1.119.7,3.216,1.417,5.174,1.466,5.174,1.466,3.513.871,6.642,1.291a45.567,45.567,0,0,0,5.873.387l6.852-.774a28.475,28.475,0,0,0,5.873-1.592,56.569,56.569,0,0,0,6.712-3.313,32.4,32.4,0,0,0,5.544-4.862,33.475,33.475,0,0,0,4.732-6.682c1.567-2.625,1.516-1.979,2.169-4.035s.442-2.049.442-4.189a15.033,15.033,0,0,0-.442-4.37c-.443-2.244-.155-2.122-1.327-4.564a15.273,15.273,0,0,0-3.358-5.2,31.716,31.716,0,0,0-6.5-6.454,75.22,75.22,0,0,0-9.089-5.938,26.739,26.739,0,0,0-4.473-2.24c-2.656-1.044-3.881-1.678-6.153-1.936a14.817,14.817,0,0,0-5.174.218,4.858,4.858,0,0,0-2.936,1.288c-.769.688-.874.861-.769,1.807a2.866,2.866,0,0,0,1.049,2.453,7.278,7.278,0,0,0,3.146,1.466,11.123,11.123,0,0,0,3.985.557,14.806,14.806,0,0,0,4.265-.557,10.783,10.783,0,0,0,3.494-1.291,20.982,20.982,0,0,0,3.566-2.366,24.254,24.254,0,0,0,4.668-6.021c1.678-2.8,1.4-2.6,2.044-5.2a11,11,0,0,0,.538-5.2,12.236,12.236,0,0,0-1.345-5.064c-.9-2.251-.484-1.762-2.259-3.939a24.081,24.081,0,0,0-4.84-4.766,34.281,34.281,0,0,0-6.131-4.171,33.823,33.823,0,0,0-6.561-3.343,40.872,40.872,0,0,0-7.476-2.449,39.388,39.388,0,0,0-5.92-.748,17.069,17.069,0,0,0-4.716.178,9.313,9.313,0,0,0-3.028.869,5.739,5.739,0,0,0-2.268,1.592c-.548.9-.776,1.273,0,2.108A4.916,4.916,0,0,0,59.66,217.6a14.2,14.2,0,0,0,5.454.229,12.985,12.985,0,0,0,4.964-1.377,7.366,7.366,0,0,0,3.438-2.465,6.625,6.625,0,0,0,1.365-2.648,27.491,27.491,0,0,0,.786-3.946,9.046,9.046,0,0,0,0-3.539,16.662,16.662,0,0,0-1.076-4.583,14.14,14.14,0,0,0-2.069-4.583A11.494,11.494,0,0,0,69.213,191a18.926,18.926,0,0,0-4.1-2.52l-5.512-1.832-5.314-.548-5.665.313-4.805.96-5.983,2.7-3.978,3-2.2,2.664-.191,1.175,1.75,1.586,5.283,3.036,1.814,1.488-1.559.9L8.21,215.122.35,217.746,0,217.139l4.152-7.176,2.272-5.09,8.362-21.423.5-.333,1.028,1.16,1.052,2.3,1.689,1.672,3.354,1.431,7.2.723,3.672.226,1.812.392-1.231.437-3.616.3-4.21.151-1.2.256L6.255,212.719l-2.448,1.747.832-2.109,15.178-23.219,3.257-6.193,1.749-4.114,1.05-3.369.255-2.722L25.2,169.9l-2.578-2.37-2.61-.862-3.66-.313-3.182.666-1.687,1.136v.96l1.687,1.645,2.387,1.293,3.946.842H23.9l5.474-1.567,3.026-1.788,3.256-3.088,1.929-2.84,1.368-3.6v-3.682l-.668-2.507L36.948,151.1l-3.023-4.113L28.833,141.5,27.273,0"
            transform="matrix(-0.017, 1, -1, -0.017, 1143.632, 20.505)"
            fill="none"
            stroke="#707070"
            stroke-width="2"
          />
        </svg>
      </div>
    </section>
  );
};

export default Drawit;
